'use client';

import * as React from 'react';
import { mergeProps } from "../../merge-props/index.js";
import { useBaseUiId } from "../../utils/useBaseUiId.js";
import { useModernLayoutEffect } from "../../utils/useModernLayoutEffect.js";
import { useFieldsetRootContext } from "../root/FieldsetRootContext.js";
export function useFieldsetLegend(params) {
  const {
    id: idProp
  } = params;
  const {
    setLegendId
  } = useFieldsetRootContext();
  const id = useBaseUiId(idProp);
  useModernLayoutEffect(() => {
    setLegendId(id);
    return () => {
      setLegendId(undefined);
    };
  }, [setLegendId, id]);
  const getLegendProps = React.useCallback((externalProps = {}) => mergeProps({
    id
  }, externalProps), [id]);
  return React.useMemo(() => ({
    getLegendProps
  }), [getLegendProps]);
}